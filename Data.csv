# -*- coding: utf-8 -*-
"""quality_monitoring.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1Y3oDuSOXe1I5YYmFRtiJ2ic98A5N8Wac
"""

import pandas as pd
import numpy as np

np.random.seed(42)

n_batches = 100

data = pd.DataFrame({
    "Batch_ID": range(1, n_batches + 1),
    "Temperature": np.random.normal(350, 5, n_batches),
    "Pressure": np.random.normal(10, 0.5, n_batches),
    "Conversion": np.random.normal(0.85, 0.03, n_batches)
})

# Add some anomalies
data.loc[5, "Temperature"] = 380
data.loc[20, "Conversion"] = 0.60

data.head()

mean_conv = data["Conversion"].mean()
std_conv = data["Conversion"].std()

upper_limit = mean_conv + 3*std_conv
lower_limit = mean_conv - 3*std_conv

print("Mean:", mean_conv)
print("Upper Limit:", upper_limit)
print("Lower Limit:", lower_limit)

data["Out_of_Control"] = (
    (data["Conversion"] > upper_limit) |
    (data["Conversion"] < lower_limit)
)

data[data["Out_of_Control"] == True]

data.to_csv("data.csv", index=False)

